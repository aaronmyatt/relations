(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{114:function(t,e,n){},116:function(t,e,n){"use strict";var c={mixins:[n(70).a],data:()=>({contact:{}}),methods:{saveContact(){this.$store.dispatch("contacts/save",this.contact),this.$emit("close")},enterPressedCallback(){this.saveContact()}}},r=n(9),l=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container has-background-white p-4"},[n("h3",{staticClass:"is-size-3"},[t._v("New Contact")]),t._v(" "),n("p",[t._v("Add the details for a new contact below")]),t._v(" "),n("div",{staticClass:"mt-4"},[n("b-field",{attrs:{label:"First Name"}},[n("b-input",{attrs:{required:""},model:{value:t.contact.firstName,callback:function(e){t.$set(t.contact,"firstName",e)},expression:"contact.firstName"}})],1),t._v(" "),n("b-field",{attrs:{label:"last Name"}},[n("b-input",{model:{value:t.contact.lastName,callback:function(e){t.$set(t.contact,"lastName",e)},expression:"contact.lastName"}})],1),t._v(" "),n("b-field",{attrs:{label:"Email Address"}},[n("b-input",{attrs:{type:"email"},model:{value:t.contact.email,callback:function(e){t.$set(t.contact,"email",e)},expression:"contact.email"}})],1),t._v(" "),n("b-field",{attrs:{label:"Telephone Number"}},[n("b-input",{attrs:{type:"tel"},model:{value:t.contact.telephone,callback:function(e){t.$set(t.contact,"telephone",e)},expression:"contact.telephone"}})],1),t._v(" "),n("b-field",{attrs:{label:"Birthday"}},[n("b-datepicker",{attrs:{inline:""},model:{value:t.contact.birthday,callback:function(e){t.$set(t.contact,"birthday",e)},expression:"contact.birthday"}})],1),t._v(" "),n("b-button",{staticClass:"has-background-success-light",attrs:{expanded:"",outlined:""},on:{click:t.saveContact}},[t._v("\n            Save\n        ")])],1)])}),[],!1,null,null,null).exports,o={methods:{openContactFormModal(){this.$buefy.modal.open({parent:this,component:l,fullScreen:!0,customClass:"custom-class custom-class-2",trapFocus:!0})}}},d=Object(r.a)(o,void 0,void 0,!1,null,null,null);e.a=d.exports},123:function(t,e,n){"use strict";n(160);var c=n(9),component=Object(c.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("Navbar"),this._v(" "),e("Nuxt")],1)}),[],!1,null,null,null);e.a=component.exports;installComponents(component,{Navbar:n(172).default})},125:function(t,e,n){n(126),t.exports=n(127)},160:function(t,e,n){"use strict";n(114)},161:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return l})),n.d(e,"mutations",(function(){return o})),n.d(e,"actions",(function(){return d}));var c=n(0),r=n(3),l=function(){return{all:[]}},o={update(t,e){t.all=e}},d={save:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t,{firstName:c,lastName:l,email:o,telephone:d,birthday:v}=e,f=new r.b.Contact(c,l,o,d,v);yield r.c.contactService.addOne(f),n("plans/initialPlan",{contact:f},{root:!0}),n("load")}))(),edit:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t;yield r.c.contactService.updateOne(e),n("load")}))(),delete:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t;yield r.c.contactService.deleteOne(e.id),n("load")}))(),load:t=>Object(c.a)((function*(){var{commit:e}=t;e("update",yield r.c.contactService.fetchAll().toArray())}))()}},169:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return l})),n.d(e,"mutations",(function(){return o})),n.d(e,"actions",(function(){return d}));var c=n(0),r=n(3),l=function(){return{all:[]}},o={update(t,e){t.all=e}},d={save:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t,{contactId:c,details:details,how:l,when:o}=e,d=new r.b.Encounter(c,details,l,o);yield r.c.encounterService.addOne(d),n("load")}))(),edit:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t;yield r.c.encounterService.updateOne(e),n("load")}))(),delete:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t;yield r.c.encounterService.deleteOne(e.id),n("load")}))(),load:t=>Object(c.a)((function*(){var{commit:e}=t;e("update",yield r.c.encounterService.fetchAll().toArray())}))()}},170:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return l})),n.d(e,"mutations",(function(){return o})),n.d(e,"actions",(function(){return d}));var c=n(0),r=n(3),l=function(){return{all:[]}},o={update(t,e){t.all=e}},d={save:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t,{contactId:c,when:l,sooner:o,later:d}=e;l=yield j(l);var v=new r.b.Plan(c,l,o,d);yield r.c.planService.addOne(v),n("load")}))(),edit:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t;e.when=yield j(e.when),yield r.c.planService.updateOne(e),n("load")}))(),delete:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t;yield r.c.planService.deleteOne(e.id),n("load")}))(),load:t=>Object(c.a)((function*(){var{commit:e}=t;e("update",yield r.c.planService.fetchAll().toArray())}))(),initialPlan(t,e){var n,c,{dispatch:r}=t,{contact:l}=e;return r("save",{contactId:l.id,when:(c=n||new Date,new Date(c.setDate(c.getDate()+7))),sooner:!1,later:!1})},addSoonerFor:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t,{contact:c}=e,r=yield w(c,4,f);r&&(yield n("save",{contactId:c.id,when:new Date(r),sooner:!0,later:!1}),n("load"))}))(),addLaterFor:(t,e)=>Object(c.a)((function*(){var{dispatch:n}=t,{contact:c}=e,r=yield w(c,14,h);r&&(yield n("save",{contactId:c.id,when:new Date(r),sooner:!1,later:!0}),n("load"))}))()};function v(t,e){return new Date(t.setDate(t.getDate()+e))}var f=t=>Math.round(t/2),h=t=>Math.round(2*t),m=function(){var t=Object(c.a)((function*(){return yield r.c.settingService.table.where("name").equals("minDaysBetweenPlans").first()}));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(c.a)((function*(){return yield r.c.settingService.table.where("name").equals("maxPlansPerDay").first()}));return function(){return t.apply(this,arguments)}}();function w(t,e,n){return O.apply(this,arguments)}function O(){return(O=Object(c.a)((function*(t,e,n){var c=yield m();if((yield r.c.planService.fetchFutureFor(t).count())>0)return!1;var l=new Date,o=yield r.c.planService.daysBetweenLastPlans(t);return l=o>c.value?v(l,n(o)):v(l,e)}))).apply(this,arguments)}function j(t){return _.apply(this,arguments)}function _(){return(_=Object(c.a)((function*(t){var e=yield y();return(yield r.c.planService.fetchAllForDate(t).count())>=e.value?j(v(t,1)):t}))).apply(this,arguments)}},172:function(t,e,n){"use strict";n.r(e);var c={mixins:[n(116).a]},r=n(9),component=Object(r.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-navbar",{staticClass:"has-background-light",attrs:{shadow:""}},[e("template",{slot:"brand"},[e("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[e("span",{staticClass:"icon is-size-3 has-text-weight-bold"},[this._v("R")])])],1),this._v(" "),e("template",{slot:"start"},[e("b-navbar-item",[e("b-button",{staticClass:"is-success",attrs:{"icon-left":"account-plus"},on:{click:this.openContactFormModal}},[this._v("\n                  Add Contact\n              ")])],1)],1),this._v(" "),e("template",{slot:"end"},[e("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/settings"}}},[this._v("\n              Settings\n          ")])],1)],2)}),[],!1,null,null,null);e.default=component.exports},68:function(t,e,n){"use strict";var c=n(3);e.a=(t,e)=>{e("database",c.a),e("services",c.c),e("models",c.b),window.database=c.a,window.services=c.c,window.models=c.b}},69:function(t,e,n){"use strict";n(106);n(1).a.filter("truncate",(function(text,t,e){return text.slice(0,t)+(t<text.length?e||"...":"")}))},70:function(t,e,n){"use strict";var c={mounted(){this.$el.addEventListener("keyup",this.listenForEnter)},destroyed(){this.$el.removeEventListener("keyup",this.listenForEnter)},methods:{listenForEnter(t){"TEXTAREA"!==t.target.tagName&&"Enter"===t.key&&this.enterPressedCallback()}}},r=n(9),component=Object(r.a)(c,void 0,void 0,!1,null,null,null);e.a=component.exports}},[[125,6,2,7]]]);